<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ì‹¤ì‹œê°„ ì›”ê¸‰ í˜„í™©ì„ í™•ì¸í•˜ëŠ” ì•±">
    <meta name="theme-color" content="#2563EB">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="ì›”ê¸‰ ë£¨íŒ¡ê¸°">
    <title>ì›”ê¸‰ ë£¨íŒ¡ê¸° - ì‹¤ì‹œê°„ ì›”ê¸‰ í˜„í™©</title>

    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">

    <!-- ì•± ì•„ì´ì½˜ -->
    <link rel="icon" type="image/png" sizes="192x192" href="/icon-192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="/icon-512.png">
    <link rel="apple-touch-icon" href="/icon-192.png">

    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes pulse-glow {
            0%, 100% { text-shadow: 0 0 20px rgba(59, 130, 246, 0.5); }
            50% { text-shadow: 0 0 30px rgba(59, 130, 246, 0.8); }
        }
        .earning-amount {
            animation: pulse-glow 2s ease-in-out infinite;
        }
        @keyframes monthly-glow {
            0%, 100% { text-shadow: 0 0 15px rgba(16, 185, 129, 0.4); }
            50% { text-shadow: 0 0 25px rgba(16, 185, 129, 0.6); }
        }
        .monthly-amount {
            animation: monthly-glow 3s ease-in-out infinite;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .message-fade {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .slide-up {
            animation: slideUp 0.6s ease-out;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen p-4 py-8">
    <div class="max-w-4xl mx-auto">
        <!-- í—¤ë” -->
        <div class="text-center mb-8">
            <h1 class="text-5xl font-bold text-gray-800 mb-2">ğŸ’° ì‹¤ì‹œê°„ ì›”ê¸‰ í˜„í™©</h1>
            <p class="text-gray-600 text-lg">ë‹¹ì‹ ì´ ì¼í•˜ëŠ” ìˆœê°„, ëˆì€ ê³„ì† ìŒ“ì…ë‹ˆë‹¤</p>
        </div>

        <!-- ì›”ê¸‰ ì…ë ¥ ì„¹ì…˜ -->
        <div id="inputSection" class="bg-white rounded-3xl shadow-2xl p-8 mb-6">
            <label class="block text-lg font-semibold text-gray-700 mb-3">ì›”ê¸‰ì„ ì…ë ¥í•´ì£¼ì„¸ìš”</label>
            <div class="flex gap-3">
                <input
                    type="number"
                    id="salaryInput"
                    placeholder="ì˜ˆ: 3000000"
                    class="flex-1 px-4 py-3 border-2 border-gray-300 rounded-xl focus:border-blue-500 focus:outline-none text-lg"
                >
                <button
                    onclick="startTracking()"
                    class="px-8 py-3 bg-blue-600 text-white font-bold rounded-xl hover:bg-blue-700 transition-all transform hover:scale-105"
                >
                    ì‹œì‘
                </button>
            </div>
        </div>

        <!-- ì‹¤ì‹œê°„ ìˆ˜ìµ í‘œì‹œ -->
        <div id="earningSection" class="hidden space-y-6">
            <!-- ì˜¤ëŠ˜ì˜ ìˆ˜ìµ ì¹´ë“œ -->
            <div class="bg-white rounded-3xl shadow-2xl p-8 slide-up">
                <div class="text-center mb-6">
                    <p class="text-gray-600 text-xl mb-3 flex items-center justify-center gap-2">
                        <span class="text-2xl">ğŸ“ˆ</span>
                        <span class="font-semibold">ì˜¤ëŠ˜ì˜ ìˆ˜ìµ</span>
                    </p>
                    <div class="earning-amount text-7xl font-bold text-blue-600 mb-2">
                        â‚©<span id="currentEarning">0</span>
                    </div>
                    <p class="text-gray-500 text-sm">
                        <span id="timeInfo"></span>
                    </p>
                </div>

                <!-- ì˜¤ëŠ˜ì˜ ì§„í–‰ ë°” -->
                <div class="mb-6">
                    <div class="flex justify-between text-sm text-gray-600 mb-2">
                        <span class="font-medium">ì˜¤ëŠ˜ì˜ ì§„í–‰ë¥ </span>
                        <span id="progressPercent" class="font-bold text-blue-600">0%</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-4 overflow-hidden">
                        <div id="progressBar" class="bg-gradient-to-r from-blue-500 to-blue-600 h-4 rounded-full transition-all duration-1000" style="width: 0%"></div>
                    </div>
                </div>

                <!-- í†µê³„ ì •ë³´ -->
                <div class="grid grid-cols-3 gap-4">
                    <div class="bg-blue-50 rounded-xl p-4 text-center">
                        <p class="text-gray-600 text-sm mb-1">ì‹œê¸‰</p>
                        <p class="text-blue-600 font-bold text-lg">â‚©<span id="hourlyRate">0</span></p>
                    </div>
                    <div class="bg-green-50 rounded-xl p-4 text-center">
                        <p class="text-gray-600 text-sm mb-1">ë¶„ê¸‰</p>
                        <p class="text-green-600 font-bold text-lg">â‚©<span id="minuteRate">0</span></p>
                    </div>
                    <div class="bg-purple-50 rounded-xl p-4 text-center">
                        <p class="text-gray-600 text-sm mb-1">ì´ˆê¸‰</p>
                        <p class="text-purple-600 font-bold text-lg">â‚©<span id="secondRate">0</span></p>
                    </div>
                </div>
            </div>

            <!-- ì´ë²ˆ ë‹¬ ëˆ„ì  í˜„í™© ì¹´ë“œ -->
            <div class="bg-gradient-to-br from-green-50 to-emerald-50 rounded-3xl shadow-2xl p-8 slide-up" style="animation-delay: 0.1s;">
                <div class="text-center mb-6">
                    <p class="text-gray-700 text-xl mb-3 flex items-center justify-center gap-2">
                        <span class="text-2xl">ğŸ“Š</span>
                        <span class="font-semibold">ì´ë²ˆ ë‹¬ ëˆ„ì  í˜„í™©</span>
                    </p>
                    <div class="monthly-amount text-6xl font-bold text-green-600 mb-2">
                        â‚©<span id="monthlyEarning">0</span>
                    </div>
                    <p class="text-gray-600 text-sm">
                        <span id="monthlyInfo"></span>
                    </p>
                </div>

                <!-- ì›”ë³„ ì§„í–‰ ë°” -->
                <div class="mb-6">
                    <div class="flex justify-between text-sm text-gray-700 mb-2">
                        <span class="font-medium">ì´ë²ˆ ë‹¬ ì§„í–‰ë¥ </span>
                        <span id="monthlyProgressPercent" class="font-bold text-green-600">0%</span>
                    </div>
                    <div class="w-full bg-white rounded-full h-5 overflow-hidden shadow-inner">
                        <div id="monthlyProgressBar" class="bg-gradient-to-r from-green-500 to-emerald-600 h-5 rounded-full transition-all duration-1000" style="width: 0%"></div>
                    </div>
                </div>

                <!-- ì›”ë³„ í†µê³„ -->
                <div class="grid grid-cols-2 gap-4 mb-4">
                    <div class="bg-white rounded-xl p-4">
                        <p class="text-gray-600 text-sm mb-1">ì˜¤ëŠ˜ê¹Œì§€ ë²ˆ ëˆ</p>
                        <p class="text-green-600 font-bold text-xl">â‚©<span id="earnedSoFar">0</span></p>
                    </div>
                    <div class="bg-white rounded-xl p-4">
                        <p class="text-gray-600 text-sm mb-1">ì´ë²ˆ ë‹¬ ë‚¨ì€ ê¸ˆì•¡</p>
                        <p class="text-blue-600 font-bold text-xl">â‚©<span id="remainingAmount">0</span></p>
                    </div>
                </div>

                <!-- ì˜ì—…ì¼ ì •ë³´ -->
                <div class="bg-white rounded-xl p-4">
                    <div class="flex justify-between items-center">
                        <div>
                            <p class="text-gray-600 text-sm">ì´ë²ˆ ë‹¬ ì˜ì—…ì¼</p>
                            <p class="text-gray-800 font-bold text-lg">
                                <span id="currentWorkingDay">0</span> / <span id="totalWorkingDays">0</span>ì¼
                            </p>
                        </div>
                        <div class="text-right">
                            <p class="text-gray-600 text-sm">ë‚¨ì€ ì˜ì—…ì¼</p>
                            <p class="text-gray-800 font-bold text-lg"><span id="remainingWorkingDays">0</span>ì¼</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ì¬ì„¤ì • ë²„íŠ¼ -->
            <div class="text-center">
                <button
                    onclick="resetTracking()"
                    class="px-6 py-2 text-gray-600 hover:text-gray-800 font-medium hover:bg-white rounded-xl transition-all"
                >
                    ì›”ê¸‰ ë‹¤ì‹œ ì„¤ì •í•˜ê¸°
                </button>
            </div>
        </div>

        <!-- ì‘ì› ë©”ì‹œì§€ ì¹´ë“œ -->
        <div id="messageCard" class="hidden bg-white rounded-2xl shadow-xl p-6 text-center message-fade">
            <p id="motivationalMessage" class="text-lg text-gray-700 font-medium"></p>
        </div>
    </div>

    <script>
        let salary = 0;
        let updateInterval = null;
        let messageInterval = null;

        const motivationalMessages = {
            working: [
                "ğŸ’ª ì¡°ê¸ˆë§Œ ë” ë²„í‹°ì„¸ìš”! í‡´ê·¼ê¹Œì§€ {minutes}ë¶„ ë‚¨ì•˜ìŠµë‹ˆë‹¤",
                "ğŸ”¥ ë‹¹ì‹ ì˜ ê°€ì¹˜ëŠ” ë§¤ ìˆœê°„ ì¦ê°€í•˜ê³  ìˆìŠµë‹ˆë‹¤!",
                "â° í‡´ê·¼ê¹Œì§€ {minutes}ë¶„, ë‹¹ì‹ ì€ í•´ë‚¼ ìˆ˜ ìˆì–´ìš”!",
                "âœ¨ ì§€ê¸ˆ ì´ ìˆœê°„ë„ ëˆì´ ìŒ“ì´ê³  ìˆìŠµë‹ˆë‹¤",
                "ğŸ¯ ëª©í‘œë¥¼ í–¥í•´ ë‹¬ë ¤ê°€ëŠ” ë‹¹ì‹ , ë©‹ì ¸ìš”!",
                "ğŸ’ ë‹¹ì‹ ì€ ì†Œì¤‘í•œ ì¸ì¬ì…ë‹ˆë‹¤",
                "ğŸš€ ì—´ì‹¬íˆ ì¼í•˜ëŠ” ë‹¹ì‹ ì„ ì‘ì›í•©ë‹ˆë‹¤!",
                "â­ ì˜¤ëŠ˜ë„ ìµœì„ ì„ ë‹¤í•˜ëŠ” ë‹¹ì‹ ì´ ìë‘ìŠ¤ëŸ¬ì›Œìš”"
            ],
            afterWork: [
                "ğŸ‰ ì˜¤ëŠ˜ë„ ê³ ìƒ ë§ìœ¼ì…¨ì–´ìš”, ë‹¹ì‹ ì€ ì†Œì¤‘í•œ ì¸ì¬ì…ë‹ˆë‹¤!",
                "ğŸ‘ í•˜ë£¨ ì—…ë¬´ ì™„ë£Œ! í‘¹ ì‰¬ì„¸ìš”",
                "ğŸŒ™ ìˆ˜ê³ í•˜ì…¨ìŠµë‹ˆë‹¤. ë‚´ì¼ë„ í™”ì´íŒ…!",
                "ğŸ’ ì˜¤ëŠ˜ í•˜ë£¨ë„ ì—´ì‹¬íˆ ì‚¬ì…¨ë„¤ìš”",
                "ğŸ† ì˜¤ëŠ˜ì˜ ëª©í‘œ ë‹¬ì„±! ë‹¹ì‹ ì€ ìµœê³ ì˜ˆìš”",
                "ğŸŠ í‡´ê·¼ ì¶•í•˜ë“œë¦½ë‹ˆë‹¤!"
            ],
            beforeWork: [
                "â˜€ï¸ ì¢‹ì€ ì•„ì¹¨ì…ë‹ˆë‹¤! ì˜¤ëŠ˜ë„ í™”ì´íŒ…!",
                "ğŸŒ… ìƒˆë¡œìš´ í•˜ë£¨ì˜ ì‹œì‘, íŒŒì´íŒ…!",
                "ğŸ’ª ì˜¤ëŠ˜ë„ ë©‹ì§„ í•˜ë£¨ ë˜ì„¸ìš”!",
                "ğŸˆ ì¶œê·¼ ì „ ì ì‹œ íœ´ì‹í•˜ì„¸ìš”",
                "âœ¨ ê³§ ì‹œì‘ë  í•˜ë£¨ë¥¼ ì‘ì›í•©ë‹ˆë‹¤!"
            ],
            weekend: [
                "ğŸ® ì£¼ë§ì—” í‘¹ ì‰¬ì„¸ìš”!",
                "ğŸŒ´ í–‰ë³µí•œ ì£¼ë§ ë³´ë‚´ì„¸ìš”",
                "ğŸ˜´ ì£¼ë§ì—” ì¬ì¶©ì „ì˜ ì‹œê°„!",
                "ğŸ¨ ì—¬ìœ ë¡œìš´ ì£¼ë§ ë˜ì„¸ìš”",
                "ğŸ€ ì†Œì¤‘í•œ íœ´ì‹ ì‹œê°„ì„ ì¦ê¸°ì„¸ìš”"
            ],
            monthly: [
                "ğŸ¯ ì´ë²ˆ ë‹¬ë„ ë²Œì¨ {percent}%ë‚˜ í•´ë‚´ì…¨ì–´ìš”!",
                "ğŸŒŸ í•œ ë‹¬ì˜ {percent}%ë¥¼ ì™„ì£¼í•˜ì…¨ìŠµë‹ˆë‹¤!",
                "ğŸ’ª {percent}% ë‹¬ì„±! ì •ë§ ëŒ€ë‹¨í•´ìš”!",
                "ğŸ”¥ ì´ë²ˆ ë‹¬ {percent}%ë¥¼ ëŒíŒŒí–ˆìŠµë‹ˆë‹¤!",
                "âœ¨ ë²Œì¨ {percent}%! ìˆœì¡°ë¡­ê²Œ ì§„í–‰ì¤‘ì…ë‹ˆë‹¤!",
                "ğŸŠ ì›”ê¸‰ì˜ {percent}%ë¥¼ ë²Œì—ˆì–´ìš”! ê³„ì† í™”ì´íŒ…!",
                "ğŸ’ í•œ ë‹¬ì˜ ì ˆë°˜ ì´ìƒì„ ë‹¬ì„±í•˜ì‹  ë‹¹ì‹ , ìµœê³ ì˜ˆìš”!",
                "ğŸš€ ì´ë²ˆ ë‹¬ ëª©í‘œê¹Œì§€ ìˆœí•­ì¤‘ì…ë‹ˆë‹¤!"
            ]
        };

        function isWeekday(date) {
            const day = date.getDay();
            return day !== 0 && day !== 6; // 0: ì¼ìš”ì¼, 6: í† ìš”ì¼
        }

        function isWorkingHours(date) {
            const hours = date.getHours();
            return hours >= 9 && hours < 18;
        }

        // ì´ë²ˆ ë‹¬ì˜ ì „ì²´ ì˜ì—…ì¼ ìˆ˜ ê³„ì‚°
        function getWorkingDaysInMonth(year, month) {
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            let workingDays = 0;

            for (let day = 1; day <= daysInMonth; day++) {
                const date = new Date(year, month, day);
                if (isWeekday(date)) {
                    workingDays++;
                }
            }

            return workingDays;
        }

        // ì˜¤ëŠ˜ì´ ì´ë²ˆ ë‹¬ì˜ ëª‡ ë²ˆì§¸ ì˜ì—…ì¼ì¸ì§€ ê³„ì‚°
        function getWorkingDayNumber(year, month, today) {
            let workingDayNumber = 0;

            for (let day = 1; day <= today; day++) {
                const date = new Date(year, month, day);
                if (isWeekday(date)) {
                    workingDayNumber++;
                }
            }

            return workingDayNumber;
        }

        // ì´ë²ˆ ë‹¬ ëˆ„ì  ìˆ˜ìµ ê³„ì‚°
        function calculateMonthlyEarnings() {
            const now = new Date();
            const year = now.getFullYear();
            const month = now.getMonth();
            const today = now.getDate();

            const totalWorkingDays = getWorkingDaysInMonth(year, month);
            const currentWorkingDay = getWorkingDayNumber(year, month, today);
            const remainingWorkingDays = totalWorkingDays - currentWorkingDay;

            const dailyWage = salary / totalWorkingDays;

            // ì˜¤ëŠ˜ê¹Œì§€ ë²ˆ ëˆ (ì˜¤ëŠ˜ í¬í•¨)
            let earnedSoFar = 0;

            // ì´ë¯¸ ì§€ë‚œ ë‚ ë“¤ì˜ ê¸‰ì—¬ (ì˜¤ëŠ˜ ì œì™¸)
            if (currentWorkingDay > 1) {
                earnedSoFar = dailyWage * (currentWorkingDay - 1);
            }

            // ì˜¤ëŠ˜ì˜ í˜„ì¬ê¹Œì§€ ë²ˆ ëˆ ì¶”ê°€
            if (isWeekday(now)) {
                const todayEarning = calculateEarnings().earning;
                earnedSoFar += todayEarning;
            }

            const remainingAmount = salary - earnedSoFar;
            const progress = (earnedSoFar / salary) * 100;

            return {
                totalWorkingDays,
                currentWorkingDay,
                remainingWorkingDays,
                earnedSoFar,
                remainingAmount,
                progress
            };
        }

        function calculateEarnings() {
            const now = new Date();

            if (!isWeekday(now)) {
                return {
                    status: 'weekend',
                    earning: 0,
                    progress: 0
                };
            }

            const hours = now.getHours();
            const minutes = now.getMinutes();
            const seconds = now.getSeconds();

            // ì¼ì¼ ê¸‰ì—¬ë¥¼ ì´ë²ˆ ë‹¬ ì˜ì—…ì¼ ê¸°ì¤€ìœ¼ë¡œ ê³„ì‚°
            const year = now.getFullYear();
            const month = now.getMonth();
            const totalWorkingDays = getWorkingDaysInMonth(year, month);
            const dailyWage = salary / totalWorkingDays;

            if (hours < 9) {
                return {
                    status: 'beforeWork',
                    earning: 0,
                    progress: 0
                };
            }

            if (hours >= 18) {
                return {
                    status: 'afterWork',
                    earning: dailyWage,
                    progress: 100
                };
            }

            // ê·¼ë¬´ ì¤‘
            const workStartHour = 9;
            const totalMinutesWorked = (hours - workStartHour) * 60 + minutes + seconds / 60;
            const minuteRate = dailyWage / (9 * 60); // 9ì‹œê°„ = 540ë¶„
            const currentEarning = minuteRate * totalMinutesWorked;

            const progress = (totalMinutesWorked / 540) * 100;
            const minutesUntilEnd = 540 - totalMinutesWorked;

            return {
                status: 'working',
                earning: currentEarning,
                progress: progress,
                minutesUntilEnd: Math.ceil(minutesUntilEnd)
            };
        }

        function formatNumber(num) {
            return Math.floor(num).toLocaleString('ko-KR');
        }

        function updateDisplay() {
            // ì˜¤ëŠ˜ì˜ ìˆ˜ìµ ì—…ë°ì´íŠ¸
            const result = calculateEarnings();
            const earningEl = document.getElementById('currentEarning');
            const timeInfoEl = document.getElementById('timeInfo');
            const progressBar = document.getElementById('progressBar');
            const progressPercent = document.getElementById('progressPercent');

            earningEl.textContent = formatNumber(result.earning);
            progressBar.style.width = result.progress + '%';
            progressPercent.textContent = result.progress.toFixed(1) + '%';

            const now = new Date();
            const timeString = now.toLocaleTimeString('ko-KR');

            if (result.status === 'working') {
                timeInfoEl.textContent = `${timeString} | í‡´ê·¼ê¹Œì§€ ${result.minutesUntilEnd}ë¶„`;
            } else if (result.status === 'afterWork') {
                timeInfoEl.textContent = `${timeString} | ì˜¤ëŠ˜ ì—…ë¬´ ì™„ë£Œ`;
            } else if (result.status === 'beforeWork') {
                timeInfoEl.textContent = `${timeString} | ì¶œê·¼ ì „`;
            } else {
                timeInfoEl.textContent = `${timeString} | ì£¼ë§`;
            }

            // ì›”ë³„ ìˆ˜ìµ ì—…ë°ì´íŠ¸
            const monthly = calculateMonthlyEarnings();

            document.getElementById('monthlyEarning').textContent = formatNumber(monthly.earnedSoFar);
            document.getElementById('earnedSoFar').textContent = formatNumber(monthly.earnedSoFar);
            document.getElementById('remainingAmount').textContent = formatNumber(monthly.remainingAmount);
            document.getElementById('monthlyProgressBar').style.width = monthly.progress + '%';
            document.getElementById('monthlyProgressPercent').textContent = monthly.progress.toFixed(1) + '%';
            document.getElementById('currentWorkingDay').textContent = monthly.currentWorkingDay;
            document.getElementById('totalWorkingDays').textContent = monthly.totalWorkingDays;
            document.getElementById('remainingWorkingDays').textContent = monthly.remainingWorkingDays;

            const monthString = (now.getMonth() + 1) + 'ì›”';
            document.getElementById('monthlyInfo').textContent = `${monthString} ${monthly.currentWorkingDay}ì¼ì°¨ ê·¼ë¬´ ì¤‘`;
        }

        function updateMotivationalMessage() {
            const result = calculateEarnings();
            const monthly = calculateMonthlyEarnings();
            const messageEl = document.getElementById('motivationalMessage');
            let messages;

            // 50% í™•ë¥ ë¡œ ì›”ê°„ ë©”ì‹œì§€ ë˜ëŠ” ì¼ë°˜ ë©”ì‹œì§€ í‘œì‹œ
            const showMonthlyMessage = Math.random() > 0.4 && monthly.progress > 5;

            if (showMonthlyMessage) {
                messages = motivationalMessages.monthly;
            } else {
                switch(result.status) {
                    case 'working':
                        messages = motivationalMessages.working;
                        break;
                    case 'afterWork':
                        messages = motivationalMessages.afterWork;
                        break;
                    case 'beforeWork':
                        messages = motivationalMessages.beforeWork;
                        break;
                    case 'weekend':
                        messages = motivationalMessages.weekend;
                        break;
                    default:
                        messages = motivationalMessages.working;
                }
            }

            const randomMessage = messages[Math.floor(Math.random() * messages.length)];
            let displayMessage = randomMessage;

            if (result.status === 'working' && randomMessage.includes('{minutes}')) {
                displayMessage = randomMessage.replace('{minutes}', result.minutesUntilEnd);
            }

            if (randomMessage.includes('{percent}')) {
                displayMessage = randomMessage.replace('{percent}', Math.floor(monthly.progress));
            }

            messageEl.textContent = displayMessage;

            // ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼ë¥¼ ìœ„í•´ í´ë˜ìŠ¤ ì¬ì ìš©
            const messageCard = document.getElementById('messageCard');
            messageCard.classList.remove('message-fade');
            setTimeout(() => {
                messageCard.classList.add('message-fade');
            }, 10);
        }

        function startTracking() {
            const input = document.getElementById('salaryInput');
            salary = parseFloat(input.value);

            if (!salary || salary <= 0) {
                alert('ì˜¬ë°”ë¥¸ ì›”ê¸‰ì„ ì…ë ¥í•´ì£¼ì„¸ìš”');
                return;
            }

            // ì‹œê¸‰, ë¶„ê¸‰, ì´ˆê¸‰ ê³„ì‚°
            const now = new Date();
            const year = now.getFullYear();
            const month = now.getMonth();
            const totalWorkingDays = getWorkingDaysInMonth(year, month);
            const dailyWage = salary / totalWorkingDays;
            const hourlyRate = dailyWage / 9;
            const minuteRate = hourlyRate / 60;
            const secondRate = minuteRate / 60;

            document.getElementById('hourlyRate').textContent = formatNumber(hourlyRate);
            document.getElementById('minuteRate').textContent = formatNumber(minuteRate);
            document.getElementById('secondRate').textContent = formatNumber(secondRate);

            // UI ì „í™˜
            document.getElementById('inputSection').classList.add('hidden');
            document.getElementById('earningSection').classList.remove('hidden');
            document.getElementById('messageCard').classList.remove('hidden');

            // ì´ˆê¸° ì—…ë°ì´íŠ¸
            updateDisplay();
            updateMotivationalMessage();

            // 1ì´ˆë§ˆë‹¤ ì—…ë°ì´íŠ¸
            updateInterval = setInterval(updateDisplay, 1000);

            // 10ì´ˆë§ˆë‹¤ ë©”ì‹œì§€ ë³€ê²½
            messageInterval = setInterval(updateMotivationalMessage, 10000);
        }

        function resetTracking() {
            clearInterval(updateInterval);
            clearInterval(messageInterval);

            document.getElementById('inputSection').classList.remove('hidden');
            document.getElementById('earningSection').classList.add('hidden');
            document.getElementById('messageCard').classList.add('hidden');
            document.getElementById('salaryInput').value = '';
            salary = 0;
        }

        // Service Worker ë“±ë¡
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then((registration) => {
                        console.log('Service Worker ë“±ë¡ ì„±ê³µ:', registration.scope);
                    })
                    .catch((error) => {
                        console.log('Service Worker ë“±ë¡ ì‹¤íŒ¨:', error);
                    });
            });
        }

        // PWA ì„¤ì¹˜ í”„ë¡¬í”„íŠ¸
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            console.log('PWA ì„¤ì¹˜ ê°€ëŠ¥');
        });
    </script>
</body>
</html>
